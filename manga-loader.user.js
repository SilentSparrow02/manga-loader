// ==UserScript==
// @name        Manga Loader Reloaded
// @namespace   manga-loader-reloaded
// @version     0.0.1
// @description The best manga reading experience the web has to offer. Genuflect/kowtow mortals.
// @copyright   2020+ fuzetsu/alhsu
// @match       https://www.mangatown.com/manga/*/*/*
// @match       https://bato.to/chapter/*
// @match       https://www.mangareader.net/*/*
// @match       https://fanfox.net/manga/*/*/*
// @match       https://manganelo.com/chapter/*/*
// @noframes
// ==/UserScript==
(function () {var a,c,b,d,U,Pa,Qa,Ra,e,k={},V=[],Sa=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function q(r,o){for(var e in o)r[e]=o[e];return r}function ha(r){var o=r.parentNode;o&&o.removeChild(r)}function ia(r,o,e){var t,$,n,a=arguments,_={};for(n in o)"key"==n?t=o[n]:"ref"==n?$=o[n]:_[n]=o[n];if(arguments.length>3)for(e=[e],n=3;n<arguments.length;n++)e.push(a[n]);if(null!=e&&(_.children=e),"function"==typeof r&&null!=r.defaultProps)for(n in r.defaultProps)void 0===_[n]&&(_[n]=r.defaultProps[n]);return D(r,_,t,$,null)}function D(r,o,e,t,$){var n={type:r,props:o,key:e,ref:t,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==$?++b.__v:$};return null!=b.vnode&&b.vnode(n),n}function E(r){return r.children}function F(r,o){this.props=r,this.context=o}function B(r,o){if(null==o)return r.__?B(r.__,r.__.__k.indexOf(r)+1):null;for(var e;o<r.__k.length;o++)if(null!=(e=r.__k[o])&&null!=e.__e)return e.__e;return"function"==typeof r.type?B(r):null}function ja(r){var o,e;if(null!=(r=r.__)&&null!=r.__c){for(r.__e=r.__c.base=null,o=0;o<r.__k.length;o++)if(null!=(e=r.__k[o])&&null!=e.__e){r.__e=r.__c.base=e.__e;break}return ja(r)}}function ka(r){(!r.__d&&(r.__d=!0)&&U.push(r)&&!G.__r++||Qa!==b.debounceRendering)&&((Qa=b.debounceRendering)||Pa)(G)}function G(){for(var r;G.__r=U.length;)r=U.sort(function(r,o){return r.__v.__b-o.__v.__b}),U=[],r.some(function(r){var o,e,t,$,n,a,_;r.__d&&(a=(n=(o=r).__v).__e,(_=o.__P)&&(e=[],(t=q({},n)).__v=n.__v+1,$=W(_,n,t,o.__n,void 0!==_.ownerSVGElement,null!=n.__h?[a]:null,e,null==a?B(n):a,n.__h),pa(e,n),$!=a&&ja(n)))})}function la(r,o,e,t,$,n,a,_,l,i){var p,u,s,S,v,c,f,d=t&&t.__k||V,h=d.length;for(l==k&&(l=null!=a?a[0]:h?B(t,0):null),e.__k=[],p=0;p<o.length;p++)if(null!=(S=e.__k[p]=null==(S=o[p])||"boolean"==typeof S?null:"string"==typeof S||"number"==typeof S?D(null,S,null,null,S):Array.isArray(S)?D(E,{children:S},null,null,null):null!=S.__e||null!=S.__c?D(S.type,S.props,S.key,null,S.__v):S)){if(S.__=e,S.__b=e.__b+1,null===(s=d[p])||s&&S.key==s.key&&S.type===s.type)d[p]=void 0;else for(u=0;u<h;u++){if((s=d[u])&&S.key==s.key&&S.type===s.type){d[u]=void 0;break}s=null}v=W(r,S,s=s||k,$,n,a,_,l,i),(u=S.ref)&&s.ref!=u&&(f||(f=[]),s.ref&&f.push(s.ref,null,S),f.push(u,S.__c||v,S)),null!=v?(null==c&&(c=v),l=ma(r,S,s,d,a,v,l),i||"option"!=e.type?"function"==typeof e.type&&(e.__d=l):r.value=""):l&&s.__e==l&&l.parentNode!=r&&(l=B(s))}if(e.__e=c,null!=a&&"function"!=typeof e.type)for(p=a.length;p--;)null!=a[p]&&ha(a[p]);for(p=h;p--;)null!=d[p]&&ra(d[p],d[p]);if(f)for(p=0;p<f.length;p++)qa(f[p],f[++p],f[++p])}function Ta(r,o){return o=o||[],null==r||"boolean"==typeof r||(Array.isArray(r)?r.some(function(r){Ta(r,o)}):o.push(r)),o}function ma(r,o,e,t,$,n,a){var _,l,i;if(void 0!==o.__d)_=o.__d,o.__d=void 0;else if($==e||n!=a||null==n.parentNode)r:if(null==a||a.parentNode!==r)r.appendChild(n),_=null;else{for(l=a,i=0;(l=l.nextSibling)&&i<t.length;i+=2)if(l==n)break r;r.insertBefore(n,a),_=a}return void 0!==_?_:n.nextSibling}function Ua(r,o,e,t,$){var n;for(n in e)"children"===n||"key"===n||n in o||H(r,n,null,e[n],t);for(n in o)$&&"function"!=typeof o[n]||"children"===n||"key"===n||"value"===n||"checked"===n||e[n]===o[n]||H(r,n,o[n],e[n],t)}function na(r,o,e){"-"===o[0]?r.setProperty(o,e):r[o]=null==e?"":"number"!=typeof e||Sa.test(o)?e:e+"px"}function H(r,o,e,t,$){var n,a,_;if($&&"className"==o&&(o="class"),"style"===o){if("string"==typeof e)r.style.cssText=e;else{if("string"==typeof t&&(r.style.cssText=t=""),t)for(o in t)e&&o in e||na(r.style,o,"");if(e)for(o in e)t&&e[o]===t[o]||na(r.style,o,e[o])}}else"o"===o[0]&&"n"===o[1]?(n=o!==(o=o.replace(/Capture$/,"")),(a=o.toLowerCase())in r&&(o=a),o=o.slice(2),r.l||(r.l={}),r.l[o+n]=e,_=n?Wa:Va,e?t||r.addEventListener(o,_,n):r.removeEventListener(o,_,n)):"list"!==o&&"tagName"!==o&&"form"!==o&&"type"!==o&&"size"!==o&&"download"!==o&&"href"!==o&&!$&&o in r?r[o]=null==e?"":e:"function"!=typeof e&&"dangerouslySetInnerHTML"!==o&&(o!==(o=o.replace(/xlink:?/,""))?null==e||!1===e?r.removeAttributeNS("http://www.w3.org/1999/xlink",o.toLowerCase()):r.setAttributeNS("http://www.w3.org/1999/xlink",o.toLowerCase(),e):null==e||!1===e&&!/^ar/.test(o)?r.removeAttribute(o):r.setAttribute(o,e))}function Va(r){this.l[r.type+!1](b.event?b.event(r):r)}function Wa(r){this.l[r.type+!0](b.event?b.event(r):r)}function oa(r,o,e){var t,$;for(t=0;t<r.__k.length;t++)($=r.__k[t])&&($.__=r,$.__e&&("function"==typeof $.type&&$.__k.length>1&&oa($,o,e),o=ma(e,$,$,r.__k,null,$.__e,o),"function"==typeof r.type&&(r.__d=o)))}function W(r,o,e,t,$,n,a,_,l){var i,p,u,s,S,v,c,f,d,h,x,m=o.type;if(void 0!==o.constructor)return null;null!=e.__h&&(l=e.__h,_=o.__e=e.__e,o.__h=null,n=[_]),(i=b.__b)&&i(o);try{r:if("function"==typeof m){if(f=o.props,d=(i=m.contextType)&&t[i.__c],h=i?d?d.props.value:i.__:t,e.__c?c=(p=o.__c=e.__c).__=p.__E:("prototype"in m&&m.prototype.render?o.__c=p=new m(f,h):(o.__c=p=new F(f,h),p.constructor=m,p.render=Ya),d&&d.sub(p),p.props=f,p.state||(p.state={}),p.context=h,p.__n=t,u=p.__d=!0,p.__h=[]),null==p.__s&&(p.__s=p.state),null!=m.getDerivedStateFromProps&&(p.__s==p.state&&(p.__s=q({},p.__s)),q(p.__s,m.getDerivedStateFromProps(f,p.__s))),s=p.props,S=p.state,u)null==m.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),null!=p.componentDidMount&&p.__h.push(p.componentDidMount);else{if(null==m.getDerivedStateFromProps&&f!==s&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(f,h),!p.__e&&null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(f,p.__s,h)||o.__v===e.__v){p.props=f,p.state=p.__s,o.__v!==e.__v&&(p.__d=!1),p.__v=o,o.__e=e.__e,o.__k=e.__k,p.__h.length&&a.push(p),oa(o,_,r);break r}null!=p.componentWillUpdate&&p.componentWillUpdate(f,p.__s,h),null!=p.componentDidUpdate&&p.__h.push(function(){p.componentDidUpdate(s,S,v)})}p.context=h,p.props=f,p.state=p.__s,(i=b.__r)&&i(o),p.__d=!1,p.__v=o,p.__P=r,i=p.render(p.props,p.state,p.context),p.state=p.__s,null!=p.getChildContext&&(t=q(q({},t),p.getChildContext())),u||null==p.getSnapshotBeforeUpdate||(v=p.getSnapshotBeforeUpdate(s,S)),x=null!=i&&i.type==E&&null==i.key?i.props.children:i,la(r,Array.isArray(x)?x:[x],o,e,t,$,n,a,_,l),p.base=o.__e,o.__h=null,p.__h.length&&a.push(p),c&&(p.__E=p.__=null),p.__e=!1}else null==n&&o.__v===e.__v?(o.__k=e.__k,o.__e=e.__e):o.__e=Xa(e.__e,o,e,t,$,n,a,l);(i=b.diffed)&&i(o)}catch(r){o.__v=null,(l||null!=n)&&(o.__e=_,o.__h=!!l,n[n.indexOf(_)]=null),b.__e(r,o,e)}return o.__e}function pa(r,o){b.__c&&b.__c(o,r),r.some(function(o){try{r=o.__h,o.__h=[],r.some(function(r){r.call(o)})}catch(r){b.__e(r,o.__v)}})}function Xa(r,o,e,t,$,n,a,_){var l,i,p,u,s,S=e.props,v=o.props;if($="svg"===o.type||$,null!=n)for(l=0;l<n.length;l++)if(null!=(i=n[l])&&((null===o.type?3===i.nodeType:i.localName===o.type)||r==i)){r=i,n[l]=null;break}if(null==r){if(null===o.type)return document.createTextNode(v);r=$?document.createElementNS("http://www.w3.org/2000/svg",o.type):document.createElement(o.type,v.is&&{is:v.is}),n=null,_=!1}if(null===o.type)S===v||_&&r.data===v||(r.data=v);else{if(null!=n&&(n=V.slice.call(r.childNodes)),p=(S=e.props||k).dangerouslySetInnerHTML,u=v.dangerouslySetInnerHTML,!_){if(null!=n)for(S={},s=0;s<r.attributes.length;s++)S[r.attributes[s].name]=r.attributes[s].value;(u||p)&&(u&&(p&&u.__html==p.__html||u.__html===r.innerHTML)||(r.innerHTML=u&&u.__html||""))}Ua(r,v,S,$,_),u?o.__k=[]:(l=o.props.children,la(r,Array.isArray(l)?l:[l],o,e,t,"foreignObject"!==o.type&&$,n,a,k,_)),_||("value"in v&&void 0!==(l=v.value)&&(l!==r.value||"progress"===o.type&&!l)&&H(r,"value",l,S.value,!1),"checked"in v&&void 0!==(l=v.checked)&&l!==r.checked&&H(r,"checked",l,S.checked,!1))}return r}function qa(r,o,e){try{"function"==typeof r?r(o):r.current=o}catch(r){b.__e(r,e)}}function ra(r,o,e){var t,$,n;if(b.unmount&&b.unmount(r),(t=r.ref)&&(t.current&&t.current!==r.__e||qa(t,null,o)),e||"function"==typeof r.type||(e=null!=($=r.__e)),r.__e=r.__d=void 0,null!=(t=r.__c)){if(t.componentWillUnmount)try{t.componentWillUnmount()}catch(r){b.__e(r,o)}t.base=t.__P=null}if(t=r.__k)for(n=0;n<t.length;n++)t[n]&&ra(t[n],o,e);null!=$&&ha($)}function Ya(r,o,e){return this.constructor(r,e)}function Za(r,o,e){var t,$,n;b.__&&b.__(r,o),$=(t=e===Ra)?null:e&&e.__k||o.__k,r=ia(E,null,[r]),n=[],W(o,(t?o:e||o).__k=r,$||k,k,void 0!==o.ownerSVGElement,e&&!t?[e]:$?null:o.childNodes.length?V.slice.call(o.childNodes):null,n,e||k,t),pa(n,r)}c=b={__e:function(r,o){for(var e,t,$,n=o.__h;o=o.__;)if((e=o.__c)&&!e.__)try{if((t=e.constructor)&&null!=t.getDerivedStateFromError&&(e.setState(t.getDerivedStateFromError(r)),$=e.__d),null!=e.componentDidCatch&&(e.componentDidCatch(r),$=e.__d),$)return o.__h=n,e.__E=e}catch(o){r=o}throw r},__v:0},a=d=function(r){return null!=r&&void 0===r.constructor},F.prototype.setState=function(r,o){var e;e=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=q({},this.state),"function"==typeof r&&(r=r(q({},e),this.props)),r&&q(e,r),null!=r&&this.__v&&(o&&this.__h.push(o),ka(this))},F.prototype.forceUpdate=function(r){this.__v&&(this.__e=!0,r&&this.__h.push(r),ka(this))},F.prototype.render=E,U=[],Pa="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,G.__r=0,Ra=k,e=0;const{isArray:$a}=Array,{hasOwnProperty:_a,getPrototypeOf:ab}=Object,I=(...$)=>console.error("zaftig:",...$),J=($,r={})=>e=>e in r?r[e]:r[e]=$(e),K=document.documentMode||/Edge\//.test(navigator.userAgent)?"ms":navigator.vendor?"webkit":"moz",sa=$=>_a.call($,"width")?$:sa(ab($)),ta=Object.keys(sa(document.documentElement.style)).filter($=>$.indexOf("-")<0&&"length"!=$),X={},L={};ta.concat(["backgroundColor","borderBottom","borderRadius","bottom","boxShadow","color","display","flexDirection","float","fontFamily","fontSize","height","margin","marginTop","marginBottom","opacity","padding","paddingBottom","right","textAlign","textDecoration","top","whiteSpace","width"].filter($=>ta.indexOf($)>=0)).forEach($=>{let r=$.replace(/[A-Z]/g,$=>"-"+$.toLowerCase()),e=(n=$)[0]+n.slice(1).replace(/[a-z]/g,"").toLowerCase();var n;0==$.toLowerCase().indexOf(K)?(e=e.slice(1),r="-"==r[0]?r:"-"+r,L[e]||(L[e]=r)):L[e]=r,X[r]=!0});const ua=document.createElement("div"),bb=J($=>["0","0 0"].some(r=>(ua.style.cssText=`${$}: ${r};`,"px;"==ua.style.cssText.slice(-3))),{flex:!1,border:!0,"border-left":!0,"border-right":!0,"border-top":!0,"border-bottom":!0}),va=/\s*,\s*/;class cb{constructor($){this.class=$,this.className=$}toString(){return this.class}valueOf(){return"."+this.class}}const Y=($,r)=>$&&r?`\n${$} {\n${r}}\n`:"",M=$=>(r,...e)=>{try{return"string"==typeof r?$(r):$a(r)?$((($,r)=>$.reduce(($,e,n)=>$+e+(null==r[n]?"":String(r[n])),""))(r,e)):""}catch(n){return I("error `",r,"`",e,"\n",n),""}},wa=()=>document.head.appendChild(document.createElement("style")),Z=wa(),xa=($,r="")=>{try{Z.sheet.insertRule(`${$}{${r}}`,0);const e=r&&Z.sheet.cssRules[0].cssText.replace(/\s/g,"");return Z.sheet.deleteRule(0),!e||e.length>$.length+2}catch($){return!1}},ya=($={})=>{const{helpers:r={},unit:e="px",id:n="z"+Math.random().toString(36).slice(2)}=$;let{style:t,debug:a=!1}=$,o=0;const h=($,r,e)=>{const o=Y(e?($=>$.replace(/(::?)([a-z-]+)(\()?/gi,($,r,e,n)=>("placeholder"==e&&"moz"!=K?e="input-"+e:"matches"==e&&(e="any"),"-"==e[0]||xa(n?$+".f)":$)?$:r+"-"+K+"-"+e+(n||""))))($):$,r);if(o){t||((t=wa()).id=n);try{t.sheet.insertRule(o,t.sheet.cssRules.length),a&&(t.textContent+=o)}catch(o){!e&&$.indexOf(":")>=0?h($,r,!0):I("insert failed",$,r,o)}}},s=$=>{$.t&&($.o.forEach(r=>r.t&&(r.i=$.i+" and "+r.i)),$.i="@media "+$.i),$.s&&h($.i,$.s.replace(/^/gm,"  ")+"\n"),$.o&&$.o.forEach(s)},i=($,r,e="",n)=>{if(/^@(media|keyframes)/.test($))return(($,r,e="",n)=>{const t=0==$.indexOf("@media"),a={i:t?$.slice($.indexOf(" ")+1):$,t:t,o:[],s:t?Y(e,r.s):""};r.o.forEach($=>i($.i,$,":root"==e?"":e,a)),n?n.o.push(a):s(a)})($,r,""==e?":root":e,n);!e||n&&!n.t||($=(($,r)=>r.split(va).reduce((r,e)=>r.concat($.split(va).map($=>$.indexOf("&")>=0?$.replace(/&/g,e):e+(":"==$[0]||"["==$[0]?"":" ")+$)),[]).join(",\n"))($,e)),n?n.s+=Y($,r.s):h($,r.s),r.o.forEach(r=>i(r.i,r,":root"==$?"":$,n))},c=($,e)=>{const n=r[$];return"function"==typeof n?n(...(e?e.split(" "):[])):n&&n+" "+e},w=($,r,t)=>{if(t&&!r&&(r=t,t=""),!r)return;if("$"==r[0]){if("$name"==r)return $.u=t;if("$compose"==r)return $.l=t;r="--"+r.slice(1)}const o=c(r,t);if(o){const r=l(o);return $.s+=r.s,void($.o=$.o.concat(r.o))}if(!t)return a&&I("no value for",r);if(r=L[r]||r,!X[r]){const $=`-${K}-${r}`;X[$]&&(r=$)}t.indexOf("$")>=0&&(t=t.replace(/\$([a-z0-9-]+)/gi,"var(--$1)")),bb(r)&&(t=t.split(" ").map($=>isNaN($)?$:$+e).join(" "));const h=`  ${r}: ${t};\n`;a&&!xa(n,h)&&I("invalid css",h),$.s+=h},l=J($=>{const r=[{s:"",o:[]}];if(!($=$&&$.trim()))return r[0];$+=";";let e=1,n="",t=0,a="",o="";for(let h=0;h<$.length;h++){const s=$[h];"\n"!=s&&(";"!=s&&"}"!=s||a)?"{"!=s||a?1==e?" "==s?(o=n.trim())&&(e=2,n=""):n+=s:2==e&&(a?s==a&&"\\"!=$[h-1]&&(a=""):"'"!=s&&"\""!=s||(a=s),n+=s):(r[++t]={i:c(o,n.trim())||(o+" "+n).trim(),s:"",o:[]},e=1,o=n=""):(w(r[t],o,n.trim()+a),"}"==s&&r[--t].o.push(r.pop()),e=1,o=n=a="")}return r[0]}),v=J($=>{const r="anim-"+n+"-"+(o+=1);return i("@keyframes "+r,l($)),r}),j=J($=>{const r=l($),e=(r.u?r.u.replace(/\s+/,"-")+"-":"")+n+"-"+(o+=1);return i("."+e,r),new cb(e+(r.l?" "+r.l:""))}),d=M(j);return d.global=M($=>i(":root",l($))),d.anim=M(v),d.style=M($=>l($).s),d.getSheet=()=>t,d.helper=$=>Object.assign(r,$),d.setDebug=$=>a=$,d.new=ya,d};var db=ya();const{isArray:eb}=Array;var fb=(t,r="className")=>{const e=t("a",{z:1}),[a,$]=Object.keys(e).filter(t=>{const r=e[t];return r&&("a"===r||r.z)});return(e,...s)=>{let n=s[0];return!n||"object"!=typeof n||eb(n)||n[a]&&n[$]?n={}:s.shift(),t(((t,e)=>{if("string"!=typeof t)return t;const a=t.indexOf(".");if(a>=0){const $=t.slice(a+1).replace(/\./g," ");e[r]=e[r]?$+" "+String(e[r]):$,t=t.slice(0,a)}return t||"div"})(e,n),n,...s)}};let y=db;const g=fb(ia);const gb="Manga Loader Reloaded";const N=(e,t=document)=>t.querySelector(e);const A=(e,t=document)=>Array.from(t.querySelectorAll(e));const O=(...e)=>console.log("%c".concat(gb,":"),"color: orange",...e);const hb=(e,t)=>{const $=document.body.appendChild(document.createElement(e));return t.style&&(Object.assign($.style,t.style),delete t.style),Object.assign($,t)};const ib=(e,t,$={})=>(...o)=>{window.clearTimeout($.current),$.current=window.setTimeout(t,e,...o)};const jb=(e,t,$={})=>{let o=0;const r=(...s)=>{window.clearTimeout($.current);const x=Date.now()-o;x<e?$.current=window.setTimeout(r,e-x,...s):(o=Date.now(),t(...s))};return r};var aa={};function kb(){const e=lb(["\n            display block\n            margin auto\n            max-width 98%\n            margin-bottom 10\n          "]);return kb=function(){return e},e}function lb(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ba,z,mb,nb=0,za=[],Aa=b.__b,Ba=b.__r,Ca=b.diffed,Da=b.__c,Ea=b.unmount;function ca($,r){b.__h&&b.__h(z,$,nb||r),nb=0;var t=z.__H||(z.__H={__:[],__h:[]});return $>=t.__.length&&t.__.push({}),t.__[$]}function P($){return nb=1,ob(Ha,$)}function ob($,r,t){var e=ca(ba++,2);return e.t=$,e.__c||(e.__=[t?t(r):Ha(void 0,r),function($){var r=e.t(e.__[0],$);e.__[0]!==r&&(e.__=[r,e.__[1]],e.__c.setState({}))}],e.__c=z),e.__}function da($,r){var t=ca(ba++,3);!b.__s&&Ga(t.__H,r)&&(t.__=$,t.__H=r,z.__H.__h.push(t))}function pb($){return nb=5,qb(function(){return{current:$}},[])}function qb($,r){var t=ca(ba++,7);return Ga(t.__H,r)&&(t.__=$(),t.__H=r,t.__h=$),t.__}function rb(){za.forEach(function($){if($.__P)try{$.__H.__h.forEach(Q),$.__H.__h.forEach(ea),$.__H.__h=[]}catch(r){$.__H.__h=[],b.__e(r,$.__v)}}),za=[]}b.__b=function($){z=null,Aa&&Aa($)},b.__r=function($){Ba&&Ba($),ba=0;var r=(z=$.__c).__H;r&&(r.__h.forEach(Q),r.__h.forEach(ea),r.__h=[])},b.diffed=function($){Ca&&Ca($);var r=$.__c;r&&r.__H&&r.__H.__h.length&&(1!==za.push(r)&&mb===b.requestAnimationFrame||((mb=b.requestAnimationFrame)||function($){var r,t=function(){clearTimeout(e),Fa&&cancelAnimationFrame(r),setTimeout($)},e=setTimeout(t,100);Fa&&(r=requestAnimationFrame(t))})(rb)),z=void 0},b.__c=function($,r){r.some(function($){try{$.__h.forEach(Q),$.__h=$.__h.filter(function($){return!$.__||ea($)})}catch(t){r.some(function($){$.__h&&($.__h=[])}),r=[],b.__e(t,$.__v)}}),Da&&Da($,r)},b.unmount=function($){Ea&&Ea($);var r=$.__c;if(r&&r.__H)try{r.__H.__.forEach(Q)}catch($){b.__e($,r.__v)}};var Fa="function"==typeof requestAnimationFrame;function Q($){var r=z;"function"==typeof $.__c&&$.__c(),z=r}function ea($){var r=z;$.__c=$.__(),z=r}function Ga($,r){return!$||$.length!==r.length||r.some(function(r,t){return r!==$[t]})}function Ha($,r){return"function"==typeof r?r($):r}function sb(){const t=R(["fs 65%"]);return sb=function(){return t},t}function tb(){const t=R(["fs 120%;transition opacity 500ms"]);return tb=function(){return t},t}function ub(){const t=R(["\n        position relative\n        bottom 0\n        left $actions-left\n        pad 2 b\n        transition left 500ms\n        > button { d block; w 100%; mar 1 b }\n      "]);return ub=function(){return t},t}function vb(){const t=R(["\n      position fixed\n      b 10;l 10\n      z-index 100\n      $actions-left -300px\n      transition opacity 500ms\n\n      o 0.5\n      :hover {\n        o 1\n        $actions-left 0\n      }\n    "]);return vb=function(){return t},t}function R(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}const Ia=({ref:e,type:t,handler:r,disabled:$,debounce:o,throttle:n})=>{const s=xb(r);da(()=>{if($)return;let r=e=>s.current(e);const u={current:void 0};r=o?ib(o,r,u):n?jb(n,r,u):r;const l=(null==e?void 0:e.current)||window;return l.addEventListener(t,r),()=>{clearTimeout(u.current),l.removeEventListener(t,r)}},[e,t,$,o,n])};const Ja=(e,t,r)=>Ia(Object.assign({type:e,handler:t},r));const wb=({ref:e,threshold:r=3,ontrigger:t,disabled:l})=>{const o=()=>{if(l)return;const o=e?e.current:document.scrollingElement;o&&o.scrollHeight-o.scrollTop<o.clientHeight*r&&t()};yb(800,o,[l]),Ia({ref:e,type:"scroll",handler:o,disabled:l,throttle:1e3})};const xb=e=>{const o=pb(e);return o.current=e,o};const yb=(e,o,r)=>da(()=>{const r=setTimeout(o,e);return()=>clearTimeout(r)},r);const zb=({text:t,lower:e=1,upper:$=1,actions:r=[]})=>{const[o,n]=P(0),a=e/$;return Ja("scroll",()=>{const t=document.scrollingElement;let e=1;t&&(e=(t.scrollTop+t.clientHeight)/t.scrollHeight),n(Math.min(100,Math.round(e*a*100)))},{throttle:250}),g(".scroll-hud"+y(vb()),g(""+y(ub()),r),g("button.scroll-top-button"+y(tb()),{onclick:()=>window.scroll({top:0,behavior:"smooth"})},"\u2303 ",o,t&&[g("br"),g("span"+y(sb()),t)]))};var Ab=aa&&aa.__awaiter||function(e,t,r,$){return new(r||(r=Promise))(function(o,n){function a(e){try{c($.next(e))}catch(t){n(t)}}function i(e){try{c($.throw(e))}catch(t){n(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,i)}c(($=$.apply(e,t||[])).next())})};const Ka=({imageUrls:e,metadata:{nextChapterUrl:t,previousChapterUrl:r,numPages:$}})=>{const[o,n]=P(10);wb({ontrigger:()=>n(o+5),disabled:o>=$});const[a,i]=P([]),[c,l]=P(!1);da(()=>{c||a.length>=$||a.length-o>=5||(()=>Ab(void 0,void 0,void 0,function*(){if(Array.isArray(e))i(e);else{l(!0);for(let t=0;t<5;t++){const{value:t,done:r}=yield e.next();if(i(e=>e.concat(t)),r)break}l(!1)}}))()},[o,c,a]);const u=()=>{var e;return document.fullscreenElement?document.exitFullscreen():null===(e=document.scrollingElement)||void 0===e?void 0:e.requestFullscreen()};return Ja("keydown",e=>{"f"===e.key.toLowerCase()&&u()}),g("main",g("section",g(zb,{lower:o,upper:$,text:c&&"Loading...",actions:[t&&g("button",{onclick:()=>location.href=t},"Next chapter"),r&&g("button",{onclick:()=>location.href=r},"Previous chapter"),g("button",{onclick:u},"Toggle fullscreen"),g("button",{onclick:()=>location.reload()},"Exit")]}),a.slice(0,o).map(e=>g("img"+y(kb()),{src:e}))))};aa.Reader=Ka;function Bb(){const n=Cb(["\n    $fonts sans-serif\n\n    $main-bg $gray-9\n    $main-fg $gray-2\n\n    $btn-bg $gray-8\n    $btn-focus $gray-7\n\n    $btn-primary-bg $pink-6\n    $btn-primary-focus $pink-5\n\n    $btn-secondary-bg $gray-7\n    $btn-secondary-focus $gray-6\n\n    font-sans\n    bc $main-bg\n    c $main-fg\n\n    * { box-sizing border-box }\n\n    button,input,select { font-sans; fs inherit }\n\n    button {\n      c $main-fg\n      bc $btn-bg\n      outline 0\n      cursor pointer\n      transition transform 200ms\n      :hover,:focus { bc $btn-focus }\n      :active { bc $btn-bg; transform scale(0.97) }\n      :disabled { cursor not-allowed }\n    }\n\n    input,button {\n      rounded\n      border 1 solid $btn-focus\n      p 0.5em\n    }\n\n    button.primary {\n      $btn-bg $btn-primary-bg\n      $btn-focus $btn-primary-focus\n    }\n\n    button.secondary {\n      $btn-bg $btn-secondary-bg\n      $btn-focus $btn-secondary-focus\n    }\n\n    .link {\n      c $link-fg\n      cursor pointer\n      :hover { td underline }\n    }\n  "]);return Bb=function(){return n},n}function Cb(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}const Db="$gray-1 #f7fafc;$gray-2 #edf2f7;$gray-3 #e2e8f0;$gray-4 #cbd5e0;$gray-5 #a0aec0;$gray-6 #718096;$gray-7 #4a5568;$gray-8 #2d3748;$gray-9 #1a202c;$red-1 #fff5f5;$red-2 #fed7d7;$red-3 #feb2b2;$red-4 #fc8181;$red-5 #f56565;$red-6 #e53e3e;$red-7 #c53030;$red-8 #9b2c2c;$red-9 #742a2a;$orange-1 #fffaf0;$orange-2 #feebc8;$orange-3 #fbd38d;$orange-4 #f6ad55;$orange-5 #ed8936;$orange-6 #dd6b20;$orange-7 #c05621;$orange-8 #9c4221;$orange-9 #7b341e;$yellow-1 #fffff0;$yellow-2 #fefcbf;$yellow-3 #faf089;$yellow-4 #f6e05e;$yellow-5 #ecc94b;$yellow-6 #d69e2e;$yellow-7 #b7791f;$yellow-8 #975a16;$yellow-9 #744210;$green-1 #f0fff4;$green-2 #c6f6d5;$green-3 #9ae6b4;$green-4 #68d391;$green-5 #48bb78;$green-6 #38a169;$green-7 #2f855a;$green-8 #276749;$green-9 #22543d;$teal-1 #e6fffa;$teal-2 #b2f5ea;$teal-3 #81e6d9;$teal-4 #4fd1c5;$teal-5 #38b2ac;$teal-6 #319795;$teal-7 #2c7a7b;$teal-8 #285e61;$teal-9 #234e52;$blue-1 #ebf8ff;$blue-2 #bee3f8;$blue-3 #90cdf4;$blue-4 #63b3ed;$blue-5 #4299e1;$blue-6 #3182ce;$blue-7 #2b6cb0;$blue-8 #2c5282;$blue-9 #2a4365;$indigo-1 #ebf4ff;$indigo-2 #c3dafe;$indigo-3 #a3bffa;$indigo-4 #7f9cf5;$indigo-5 #667eea;$indigo-6 #5a67d8;$indigo-7 #4c51bf;$indigo-8 #434190;$indigo-9 #3c366b;$purple-1 #faf5ff;$purple-2 #e9d8fd;$purple-3 #d6bcfa;$purple-4 #b794f4;$purple-5 #9f7aea;$purple-6 #805ad5;$purple-7 #6b46c1;$purple-8 #553c9a;$purple-9 #44337a;$pink-1 #fff5f7;$pink-2 #fed7e2;$pink-3 #fbb6ce;$pink-4 #f687b3;$pink-5 #ed64a6;$pink-6 #d53f8c;$pink-7 #b83280;$pink-8 #97266d;$pink-9 #702459;";const La={xs:".75rem",sm:".875rem",base:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"4rem"};const fa={uw:"3440px",xl:"1200px",lg:"992px",md:"768px",sm:"576px"};const Ma={base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",inner:"inset 0 2px 4px 0 rgba(0, 0, 0, 0.06)",outline:"0 0 0 3px rgba(66, 153, 225, 0.5)",none:"none"},Eb={up:"min",down:"max"},ga=e=>.25*e+"rem",Na=e=>($,r)=>{const t=ga($);return r?r.split("").map($=>e+$+" "+t).join(";"):e+" "+t},Fb={pad:Na("p"),mar:Na("m"),"font-sans":"ff -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, \"Noto Sans\", sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\"","font-serif":"ff Georgia, Cambria, \"Times New Roman\", Times, serif","font-mono":"ff Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace",rounded:"br .25rem",text:e=>"font-size "+(La[e]||La.base),shadow:e=>"box-shadow "+(Ma[e]||Ma.base),size:(e,$=e)=>"width ".concat(ga(e),"; height ").concat(ga($)),"flex-center":"d flex;jc center;ai center","@resp":(e,$)=>"@media (".concat(Eb[$||"up"],"-width: ").concat(fa[e],")"),"@between":(e,$)=>"@media (min-width: ".concat(fa[e],") and (max-width: ").concat(fa[$],")"),"limit-lines":e=>"display -webkit-box;-webkit-box-orient vertical;-webkit-line-clamp ".concat(e,";overflow hidden"),anim:"transition"};const Gb=()=>{y.helper(Fb),y.global(Db),y.global(Bb())};var C={};var T=C&&C.__await||function(t){return this instanceof T?(this.v=t,this):new T(t)},Hb=C&&C.__asyncGenerator||function(t,e,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=a.apply(t,e||[]),$=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(t){r[t]&&(n[t]=function(e){return new Promise(function(a,n){$.push([t,e,a,n])>1||i(t,e)})})}function i(t,e){try{(a=r[t](e)).value instanceof T?Promise.resolve(a.value.v).then(m,s):c($[0][2],a)}catch(n){c($[0][3],n)}var a}function m(t){i("next",t)}function s(t){i("throw",t)}function c(t,e){t(e),$.shift(),$.length&&i($[0][0],$[0][1])}};const Oa=[{name:"magantown",match:"mangatown.com/manga/[^/]+/[^/]+",getMetadata:()=>({numPages:N(".page_select select").options.length-1}),getImages:function(){return Hb(this,arguments,function*(){const{src:t}=N("#image"),e=this.getMetadata().numPages;for(let a=1;a<=e;a++)yield yield T(t.replace(/[0-9]+\.(jpg|png)/,"".concat(String(a).padStart(3,"0"),".$1")))})}},{name:"batoto",match:"bato.to/chapter",getImages:()=>A("#viewer img").map(t=>t.src),getMetadata:()=>({numPages:A("#viewer img").length})},{name:"mangareader.net",match:"https://www.mangareader.net/[^/]+/[0-9]+",getImages:()=>document.mj.im.map(t=>t.u),getMetadata:()=>({numPages:document.mj.im.length})},{name:"fanfox.net",match:"https://fanfox.net/manga/[^/]+/[^/]+/[^/]+.html",getImages:()=>A("img.reader-main-img").map(t=>t.dataset.src||t.src),getMetadata:()=>({numPages:A("img.reader-main-img").length})},{name:"manganelo",match:"https://manganelo.com/chapter/[^/]+/[^/]+",getImages:()=>A(".container-chapter-reader img").map(t=>t.src),getMetadata(){var t,e;return{numPages:A(".container-chapter-reader img").length,nextChapterUrl:null===(t=N("a.navi-change-chapter-btn-next"))||void 0===t?void 0:t.href,previousChapterUrl:null===(e=N("a.navi-change-chapter-btn-prev"))||void 0===e?void 0:e.href}}}];C.websites=Oa;O("loaded script");const Ib=()=>{var a;O("loading manga");const e=location.href,t=Oa.find(a=>new RegExp(a.match,"i").test(e));if(!t)return void O("dang, could not find a matching site implementation... sad day");O("found matching site handler",t);const i=t.getImages(),r=null===(a=t.getMetadata)||void 0===a?void 0:a.call(t);document.body.innerHTML=document.head.innerHTML="",Gb(),Za(g(Ka,{imageUrls:i,metadata:r}),document.body)};hb("button",{textContent:"Load manga",style:{position:"fixed",bottom:"0",right:"0",margin:"10px",fontSize:"120%",padding:"5px",cursor:"pointer"},onclick:Ib});})();